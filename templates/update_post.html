{% extends 'base.html' %}

{% block title %}Actualizar Post{% endblock %}

{% block content %}
<div class="columns">
    <div class="column is-offset-3 is-6">
        <div class="card">
            <div class="card-content">
                <form method="POST" action="{{ url_for('update_post', id=post.id) }}">
                    <!-- Campo de título -->
                    <div class="field">
                        <label class="label">Título</label>
                        <div class="control">
                            <input class="input" type="text" name="title" value="{{ post.title }}" required>
                        </div>
                    </div>
                    
                    <!-- Selector de categoría -->
                    <div class="field">
                        <label class="label">Categoría</label>
                        <div class="control">
                            <div class="select">
                                <select name="category_id">
                                    {% for category in categories %}
                                    <option value="{{ category.id }}" 
                                        {% if category.id == post.category_id %}selected{% endif %}>
                                        {{ category.name }}
                                    </option>
                                    {% endfor %}  <!-- ¡Cierre del for! -->
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Campo de contenido -->
                    <div class="field">
                        <label class="label">Contenido</label>
                        <div class="control">
                            <textarea class="textarea" name="content" required>{{ post.content }}</textarea>
                        </div>
                    </div>
                    
                    <!-- Botones -->
                    <div class="field is-grouped">
                        <div class="control">
                            <button type="submit" class="button is-link">Actualizar</button>
                        </div>
                        <div class="control">
                            <a href="{{ url_for('list_posts') }}" class="button is-danger is-light">Cancelar</a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}  <!-- Espacio después de endblock -->